{"version":3,"sources":["App.js","index.js"],"names":["App","useState","salesData","setSalesData","streamsData","setStreamsData","date","datePicker","useRef","viewStream","id","window","open","salesListRender","totalOrders","length","map","el","index","_date","Date","createdAt","streamViewData","streamId","totalStreams","filter","i","_id","getStreamDataById","stream","title","name","onClick","className","key","amount","toLocaleDateString","checkout","customerEmail","lineItems","quantity","style","backgroundImage","image_url","cartRender","ref","placeholder","now","onChange","e","event","target","value","salesUrl","streamsUrl","fetch","then","res","json","body","dateHandler","type","totalOrdersCount","orderSales","totalStreamsCount","streamViews","views","thumbnail","description","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.14dc4e9a.chunk.js","sourcesContent":["import React, { useState, useRef } from 'react';\n\nimport './App.css';\n\nfunction App() {\n\n\n\n  const [salesData, setSalesData] = useState();\n  const [streamsData, setStreamsData] = useState();\n  const [date, setDate] = useState();\n\n  const datePicker = useRef(null);\n\n  function dateHandler (event) {\n    let _date = event.target.value;\n    const salesUrl = `https://api-v1.simustream.com/api/v1/daily-updates/daily-stats/get-total-stats?maxDate=${_date}&type=sales`\n    const streamsUrl = `https://api-v1.simustream.com/api/v1/daily-updates/daily-stats/get-total-stats?maxDate=${_date}&type=streams`\n    \n    fetch(salesUrl)\n      .then(res=>res.json())\n      .then(res=>setSalesData(res.body))\n    fetch(streamsUrl)\n      .then(res=>res.json())\n      .then(res=>setStreamsData(res.body));\n  }\n\n  function viewStream (id) {\n    window.open(`https://play.simustream.com/?id=${id}`)\n  }\n\n  function getStreamDataById(streamId){\n    if (streamsData && streamsData.totalStreams && streamsData.totalStreams.length){\n      return streamsData.totalStreams.filter((el, i)=>{\n        return el._id === streamId\n      })[0];\n    }\n  }\n\n  function cartRender(index){\n    if(salesData.totalOrders[index].checkout && salesData.totalOrders[index].checkout.length && salesData.totalOrders[index].checkout[0].lineItems){\n      return salesData.totalOrders[index].checkout[0].lineItems.map((el, i)=>{\n        return (\n          <div className=\"hidden\">\n            <span>Qnty: {el.quantity}</span>\n            <span className=\"preview left\" style={{backgroundImage: `url(${el.image_url})`}}></span>\n          </div>\n        )\n      })\n    } else {\n      return null\n    }\n  }\n\n  function salesListRender (){\n    if (salesData && salesData.totalOrders && salesData.totalOrders.length){\n      return (salesData.totalOrders.map((el, index)=>{\n        let _date = new Date(el.createdAt);\n        let streamViewData = getStreamDataById(el.stream);\n        let title = streamViewData ? streamViewData.name : \"unknown\";\n        return(\n          <div onClick={()=>{viewStream(el.stream)}} className=\"item\" key={`sale-${index}`}>\n            <span className=\"amount\">${el.amount}</span>\n            <span className=\"date\">{_date.toLocaleDateString()}</span>\n            <span className=\"title\">{title}</span>\n            <div>Items: {el.checkout.length}</div>\n            <div>{el.customerEmail}</div>\n            {cartRender(index)}\n          </div>\n        )\n      }))\n    } else {\n      return null;\n    }\n  }\n\n  function streamsListRender () {\n    if (streamsData && streamsData.totalStreams && streamsData.totalStreams.length){\n      return (streamsData.totalStreams.map((el, index)=>{\n        let _date = new Date(el.createdAt);\n        return(\n          <div onClick={()=>{viewStream(el._id)}} className=\"item\" key={`stream-${index}`}>\n              <span className=\"views\">{el.views}</span>\n              <span className=\"date\">{_date.toLocaleDateString()}</span>\n              <span className=\"title\">{el.name}</span>\n              <div className=\"hidden\">\n                <span className=\"preview right\" style={{backgroundImage: `url(${el.thumbnail})`}}></span>\n                <div className=\"description\">{el.description}</div>\n              </div>\n          </div>\n        )\n      }))\n    } else {\n      return null;\n    }\n  }\n\n  function renderStreamsData(){\n    if(salesData && streamsData){\n      return (\n        <div className=\"dataContainer\">\n          <div className=\"left\">\n            <div className=\"header\">\n              <span>Purchases: {salesData.totalOrdersCount}</span>\n              <span>Total Sales: ${salesData.orderSales}</span>\n            </div>\n            {salesListRender()}\n          </div>\n          <div className=\"right\">\n            <div className=\"header\">\n              <span>Streams Created: {streamsData.totalStreamsCount}</span>\n              <span>Stream Views: {streamsData.streamViews}</span>\n            </div>\n            {streamsListRender()}\n          </div>\n        </div>\n      )\n    } else {\n      return <div>No data</div>;\n    }\n  }\n\n  return (\n    <div>\n      <h1>SIMUSTREAM DATA</h1>\n      <input ref={datePicker} placeholder={new Date().now} onChange={ e =>{dateHandler(e)}} value={date} type=\"date\"></input>\n      <div>{renderStreamsData()}</div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}